{
  "timestamp": "2025-07-29T16:44:22.843902+00:00",
  "system_info": {
    "git_commit": "31eeaf46f51277629dd35ac2d681a40dabe12696",
    "git_branch": "main",
    "python_version": "3.13.5 (tags/v3.13.5:6cb20a2, Jun 11 2025, 16:15:46) [MSC v.1943 64 bit (AMD64)]",
    "project_files": [
      "Dockerfile",
      "LICENSE",
      "README.md",
      "README_EVAL.md",
      "TEST_EXPLANATION.md",
      "VSCODE_SETUP.md",
      "__pycache__\\main.cpython-313.pyc",
      "__pycache__\\test_main.cpython-313-pytest-8.4.1.pyc",
      "alembic.ini",
      "app\\__init__.py",
      "app\\__pycache__\\__init__.cpython-313.pyc",
      "app\\__pycache__\\agent_router.cpython-313.pyc",
      "app\\__pycache__\\agent_service.cpython-313.pyc",
      "app\\__pycache__\\archivist.cpython-313.pyc",
      "app\\__pycache__\\cert_manager.cpython-313.pyc",
      "app\\__pycache__\\config.cpython-313.pyc",
      "app\\__pycache__\\database.cpython-313.pyc",
      "app\\__pycache__\\db.cpython-313.pyc",
      "app\\__pycache__\\endpoints.cpython-313.pyc",
      "app\\__pycache__\\logging_config.cpython-313.pyc",
      "app\\__pycache__\\main.cpython-313.pyc",
      "app\\__pycache__\\middleware.cpython-313.pyc",
      "app\\__pycache__\\middleware_security.cpython-313.pyc",
      "app\\__pycache__\\models.cpython-313.pyc",
      "app\\__pycache__\\monitoring.cpython-313.pyc",
      "app\\__pycache__\\schemas.cpython-313.pyc",
      "app\\__pycache__\\security.cpython-313.pyc",
      "app\\__pycache__\\task_router.cpython-313.pyc",
      "app\\__pycache__\\task_service.cpython-313.pyc",
      "app\\__pycache__\\validators.cpython-313.pyc",
      "app\\agent_router.py",
      "app\\agent_service.py",
      "app\\archivist.py",
      "app\\cert_manager.py",
      "app\\cli.py",
      "app\\config.py",
      "app\\db.py",
      "app\\endpoints.py",
      "app\\logging_config.py",
      "app\\main.py",
      "app\\messaging.py",
      "app\\middleware.py",
      "app\\middleware_security.py",
      "app\\models.py",
      "app\\monitoring.py",
      "app\\schemas.py",
      "app\\security.py",
      "app\\task_router.py",
      "app\\task_service.py",
      "app\\utils\\__pycache__\\time.cpython-313.pyc",
      "app\\utils\\time.py",
      "app\\validators.py",
      "audit_report.md",
      "code_bundle.md",
      "docker-compose.yml",
      "docker\\db-init\\00-init.sh",
      "eventbus.db",
      "eventbus_test.db",
      "migrations\\README",
      "migrations\\__pycache__\\env.cpython-313.pyc",
      "migrations\\env.py",
      "migrations\\script.py.mako",
      "migrations\\versions\\7c165f5e0b93_agents_tasks.py",
      "migrations\\versions\\__pycache__\\7c165f5e0b93_agents_tasks.cpython-313.pyc",
      "migrations\\versions\\__pycache__\\9fe4128bb674_ensure_audit_log_sha256_integrity.cpython-313.pyc",
      "migrations\\versions\\__pycache__\\bd536313df34_create_audit_log.cpython-313.pyc",
      "migrations\\versions\\__pycache__\\bd536313df34_tz_default.cpython-313.pyc",
      "migrations\\versions\\bd536313df34_create_audit_log.py",
      "migrations\\versions\\bd536313df34_tz_default.py",
      "mosquitto\\certs\\ca.crt",
      "mosquitto\\certs\\ca.key",
      "mosquitto\\certs\\ca.srl",
      "mosquitto\\certs\\server.crt",
      "mosquitto\\certs\\server.csr",
      "mosquitto\\certs\\server.key",
      "mosquitto\\conf\\mosquitto.conf",
      "pg_hba.conf",
      "pyproject.toml",
      "pytest.ini",
      "requirements.lock",
      "requirements.txt",
      "scripts\\002_create_rw_user.sql",
      "scripts\\003_create_ro_user.sql",
      "scripts\\comprehensive_eval.py",
      "scripts\\create_db_roles.py",
      "scripts\\expert_audit.py",
      "scripts\\fix_utc_times.py",
      "scripts\\gen-mqtt-cert.sh",
      "scripts\\make_audit_bundle.sh",
      "scripts\\make_code_bundle.py",
      "scripts\\make_full_audit.py",
      "scripts\\no_bom_check.py",
      "scripts\\pytest_no_warnings.py",
      "scripts\\remove_bom.py",
      "scripts\\run_all_checks.py",
      "scripts\\run_eval.bat",
      "scripts\\run_eval.sh",
      "scripts\\run_tests_no_warnings.bat",
      "scripts\\run_tests_no_warnings.sh",
      "scripts\\use-local-env.ps1",
      "setup.py",
      "test.db",
      "test_import.py",
      "tests\\__pycache__\\conftest.cpython-313-pytest-8.4.1.pyc",
      "tests\\__pycache__\\test_agent_registry.cpython-313-pytest-8.4.1.pyc",
      "tests\\__pycache__\\test_api.cpython-313-pytest-8.4.1.pyc",
      "tests\\__pycache__\\test_archivist.cpython-313-pytest-8.4.1.pyc",
      "tests\\__pycache__\\test_hash_integrity.cpython-313-pytest-8.4.1.pyc",
      "tests\\__pycache__\\test_integration_db.cpython-313-pytest-8.4.1.pyc",
      "tests\\__pycache__\\test_migrations_clean.cpython-313-pytest-8.4.1.pyc",
      "tests\\__pycache__\\test_pagination.cpython-313-pytest-8.4.1.pyc",
      "tests\\__pycache__\\test_security_headers.cpython-313-pytest-8.4.1.pyc",
      "tests\\__pycache__\\test_task_router.cpython-313-pytest-8.4.1.pyc",
      "tests\\__pycache__\\test_time_utils.cpython-313-pytest-8.4.1.pyc",
      "tests\\conftest.py",
      "tests\\test_agent_registry.py",
      "tests\\test_api.py",
      "tests\\test_archivist.py",
      "tests\\test_hash_integrity.py",
      "tests\\test_migrations_clean.py",
      "tests\\test_pagination.py",
      "tests\\test_security_headers.py",
      "tests\\test_task_router.py",
      "tests\\test_time_utils.py",
      "tls.crt",
      "tls.key"
    ],
    "total_files": 126
  },
  "code_analysis": {
    "black_formatted": true,
    "ruff_clean": true,
    "lines_of_code": {
      "python": 4525,
      "yaml": 61,
      "markdown": 0,
      "sql": 0,
      "shell": 0
    },
    "black_output": "All done! \\u2728 \\U0001f370 \\u2728\n28 files would be left unchanged.\n",
    "ruff_output": "All checks passed!\n"
  },
  "security_assessment": {
    "secrets_in_code": {
      "suspicious_patterns_found": 39,
      "findings": [
        "C:\\Users\\alireza\\Documents\\GitHub\\aegis-event-bus\\app\\cert_manager.py: contains 'key'",
        "C:\\Users\\alireza\\Documents\\GitHub\\aegis-event-bus\\app\\cli.py: contains 'secret'",
        "C:\\Users\\alireza\\Documents\\GitHub\\aegis-event-bus\\app\\cli.py: contains 'key'",
        "C:\\Users\\alireza\\Documents\\GitHub\\aegis-event-bus\\app\\cli.py: contains 'token'",
        "C:\\Users\\alireza\\Documents\\GitHub\\aegis-event-bus\\app\\config.py: contains 'password'",
        "C:\\Users\\alireza\\Documents\\GitHub\\aegis-event-bus\\app\\config.py: contains 'secret'",
        "C:\\Users\\alireza\\Documents\\GitHub\\aegis-event-bus\\app\\config.py: contains 'key'",
        "C:\\Users\\alireza\\Documents\\GitHub\\aegis-event-bus\\app\\config.py: contains 'token'",
        "C:\\Users\\alireza\\Documents\\GitHub\\aegis-event-bus\\app\\models.py: contains 'key'",
        "C:\\Users\\alireza\\Documents\\GitHub\\aegis-event-bus\\app\\schemas.py: contains 'token'",
        "C:\\Users\\alireza\\Documents\\GitHub\\aegis-event-bus\\app\\security.py: contains 'password'",
        "C:\\Users\\alireza\\Documents\\GitHub\\aegis-event-bus\\app\\security.py: contains 'secret'",
        "C:\\Users\\alireza\\Documents\\GitHub\\aegis-event-bus\\app\\security.py: contains 'key'",
        "C:\\Users\\alireza\\Documents\\GitHub\\aegis-event-bus\\app\\security.py: contains 'token'",
        "C:\\Users\\alireza\\Documents\\GitHub\\aegis-event-bus\\app\\security.py: contains 'credential'",
        "C:\\Users\\alireza\\Documents\\GitHub\\aegis-event-bus\\scripts\\comprehensive_eval.py: contains 'password'",
        "C:\\Users\\alireza\\Documents\\GitHub\\aegis-event-bus\\scripts\\comprehensive_eval.py: contains 'key'",
        "C:\\Users\\alireza\\Documents\\GitHub\\aegis-event-bus\\scripts\\comprehensive_eval.py: contains 'token'",
        "C:\\Users\\alireza\\Documents\\GitHub\\aegis-event-bus\\scripts\\create_db_roles.py: contains 'password'",
        "C:\\Users\\alireza\\Documents\\GitHub\\aegis-event-bus\\scripts\\expert_audit.py: contains 'password'",
        "C:\\Users\\alireza\\Documents\\GitHub\\aegis-event-bus\\scripts\\expert_audit.py: contains 'secret'",
        "C:\\Users\\alireza\\Documents\\GitHub\\aegis-event-bus\\scripts\\expert_audit.py: contains 'key'",
        "C:\\Users\\alireza\\Documents\\GitHub\\aegis-event-bus\\scripts\\expert_audit.py: contains 'token'",
        "C:\\Users\\alireza\\Documents\\GitHub\\aegis-event-bus\\scripts\\expert_audit.py: contains 'credential'",
        "C:\\Users\\alireza\\Documents\\GitHub\\aegis-event-bus\\scripts\\make_code_bundle.py: contains 'secret'",
        "C:\\Users\\alireza\\Documents\\GitHub\\aegis-event-bus\\scripts\\make_code_bundle.py: contains 'key'",
        "C:\\Users\\alireza\\Documents\\GitHub\\aegis-event-bus\\scripts\\make_full_audit.py: contains 'key'",
        "C:\\Users\\alireza\\Documents\\GitHub\\aegis-event-bus\\scripts\\run_all_checks.py: contains 'key'",
        "C:\\Users\\alireza\\Documents\\GitHub\\aegis-event-bus\\tests\\conftest.py: contains 'key'",
        "C:\\Users\\alireza\\Documents\\GitHub\\aegis-event-bus\\tests\\test_api.py: contains 'password'",
        "C:\\Users\\alireza\\Documents\\GitHub\\aegis-event-bus\\tests\\test_api.py: contains 'key'",
        "C:\\Users\\alireza\\Documents\\GitHub\\aegis-event-bus\\tests\\test_api.py: contains 'token'",
        "C:\\Users\\alireza\\Documents\\GitHub\\aegis-event-bus\\tests\\test_pagination.py: contains 'password'",
        "C:\\Users\\alireza\\Documents\\GitHub\\aegis-event-bus\\tests\\test_pagination.py: contains 'key'",
        "C:\\Users\\alireza\\Documents\\GitHub\\aegis-event-bus\\tests\\test_pagination.py: contains 'token'",
        "C:\\Users\\alireza\\Documents\\GitHub\\aegis-event-bus\\tests\\test_task_router.py: contains 'password'",
        "C:\\Users\\alireza\\Documents\\GitHub\\aegis-event-bus\\tests\\test_task_router.py: contains 'token'",
        "C:\\Users\\alireza\\Documents\\GitHub\\aegis-event-bus\\migrations\\versions\\7c165f5e0b93_agents_tasks.py: contains 'key'",
        "C:\\Users\\alireza\\Documents\\GitHub\\aegis-event-bus\\migrations\\versions\\bd536313df34_create_audit_log.py: contains 'key'"
      ]
    },
    "dependency_vulnerabilities": {
      "status": "manual_check_required",
      "note": "Run 'pip-audit' or 'safety check' for vulnerability assessment"
    },
    "security_headers": {
      "security_middleware": "implemented",
      "headers": [
        "X-Content-Type-Options",
        "X-Frame-Options",
        "Referrer-Policy"
      ]
    },
    "authentication": {
      "jwt_implementation": "present",
      "password_hashing": "bcrypt",
      "rate_limiting": "implemented"
    }
  },
  "test_results": {
    "exit_code": 0,
    "output": "============================= test session starts =============================\nplatform win32 -- Python 3.13.5, pytest-8.4.1, pluggy-1.6.0\nrootdir: C:\\Users\\alireza\\Documents\\GitHub\\aegis-event-bus\nconfigfile: pytest.ini\ntestpaths: tests\nplugins: anyio-4.9.0\ncollected 22 items\n\ntests\\test_agent_registry.py ...........                                 [ 50%]\ntests\\test_api.py ...                                                    [ 63%]\ntests\\test_archivist.py .                                                [ 68%]\ntests\\test_hash_integrity.py s                                           [ 72%]\ntests\\test_migrations_clean.py .                                         [ 77%]\ntests\\test_pagination.py .                                               [ 81%]\ntests\\test_security_headers.py .                                         [ 86%]\ntests\\test_task_router.py .                                              [ 90%]\ntests\\test_time_utils.py .s                                              [100%]\n\n============================== warnings summary ===============================\n..\\..\\..\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\formparsers.py:12\n  C:\\Users\\alireza\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\formparsers.py:12: PendingDeprecationWarning: Please use `import python_multipart` instead.\n    import multipart\n\ntests/test_api.py: 2 warnings\ntests/test_pagination.py: 5 warnings\ntests/test_task_router.py: 4 warnings\n  C:\\Users\\alireza\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\jose\\jwt.py:311: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).\n    now = timegm(datetime.utcnow().utctimetuple())\n\n-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html\n================= 20 passed, 2 skipped, 12 warnings in 7.98s ==================\n",
    "passed": true,
    "total_tests": 12
  },
  "deployment_status": {
    "docker_compose": true,
    "dockerfile": true,
    "ci_cd": true,
    "database_migrations": true,
    "environment_config": true
  },
  "recommendations": [
    "Review code for hardcoded secrets",
    "Consider adding API documentation with OpenAPI/Swagger",
    "Implement comprehensive logging strategy",
    "Add monitoring and alerting",
    "Consider container security scanning",
    "Implement backup and disaster recovery procedures"
  ]
}